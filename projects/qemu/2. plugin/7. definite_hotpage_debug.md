正确的调试hotpage插件的方法。

首先，我们要正确地对qemu进行编译，为其添加debug调试信息。通过`sudo ./configure --help`可以查看到qemu编译的帮助信息。因此我们的配置命令是这样的：

```shell
sudo ./configure --target-list=x86_64-softmmu --enable-plugins --enable-kvm --enable-debug-tcg --enable-debug --enable-debug-info
```

之后再进行编译、安装和单独编译plugin：

```shell
sudo make -j8
sudo make install

# 单独编译plugin
cd build/contrib/plugins
sudo make
```

这样我们在启动qemu的时候就可以进行调试了。另外，**我们不能使用stub的方式去调试，要使用本地的gdb，因为动态库加载的地址在远程gdb访问不到**。下面编写好qemu的运行脚本：

```shell
```

然后就可以启动了：

```shell
sudo ./qemu_gdb.sh
```

之后沿用[[projects/qemu/2. plugin/6. dynamic_link_library#2. QEMU plugin 动态库|上一篇报告中]]介绍的方法，就可以成功地把plugin的符号表加载到gdb中了。我们也能正确地给hotpages.c源码打上断点，并运行到这里：

