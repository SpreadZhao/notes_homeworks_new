数据库中Schema设计：

```sql
create table flights(
	flight_num char(10) primary key,
	price int,
	num_seats int,
	num_avail int,
	from_city varchar(20),
	ariv_city varchar(20)
);

create table hotels(
	location char(20) primary key,
	price int,
	num_rooms int,
	num_avail int
);

create table bus(
	location char(20) primary key,
	price int,
	num_seats int,
	num_avail int
);

create table customers(
	cust_name varchar(30) primary key
);

create table reservations(
	resv_key char(20) primary key,
	cust_name varchar(30),
	resv_type int,
	
	foreign key(cust_name) references customers(cust_name)
);
```

ER图：

![[homework/Database/resources/Pasted image 20221127171233.png]]

这里需要强调一点，就是reservations表。预定这张表是用户修改最频繁的表，比如某个用户定了一张机票，就要在这张表中添加一个tuple。但是，我怎么根据用户预定的产品类型去修改相应的表呢？也就是顶机票就要修改flights表；定巴士就要修改bus表等等……靠的就是reservations表中的resv_type。当检测到是某个值的时候，就根据这个值去自动修改对应的表即可。但是，知道了修改这张表，我又怎么去知道应该修改表中的哪一项呢？靠的就是resv_key。比如我预定了`3U8595`这趟航班，那resv_key就是`00013U8595`。前4位是固定长度的id，而后面就是预定的bus、flight、hotel的主键。通过这个主键就能唯一确定要修改的tuple。

