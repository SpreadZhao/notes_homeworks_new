# 1. 访问配置网络设备

## 1.1 实验要求

1. 每组：1台交换机通过网线连接3台电脑PC，构建小的星型以太网
2. 为3台PC配置相同子网的不同ip，用ipconfig查看网卡有关配置信息
3. 用ping命令：测试从本机源地址到目标ip的网络连通情况
4. 为PC配置不同子网的ip，互相ping测试等，理解IP有关知识点
	* 验证：同一个网段子网的机器可以直接通讯；不同子网下则不通 
5. 以上操作要画好网络拓扑图，标注清晰有关信息，做好实验记录，理解网络知识点
6. 练习：通过CONSOLE口，熟练使用超级终端软件访问网络设备，学习交换机常用命令。
7. display current-configuration：查看配置信息，并理解之
8. 每2人做一根标准的网络直通线

## 1.2 实验过程

本次实验只是熟悉一下交换机的使用，以及常见的配置命令。下面是本次实验的拓扑图：

![[Excalidraw/Drawing 2022-12-12 16.04.11.excalidraw|500]]

经过测试，pc1可以ping通pc2，但是pc1和pc2无法ping通pc3。这正好验证了要求中的第4条。交换机本身不需要额外的配置，而下面的命令可以查看交换机当前的配置：

```shell
system-view
display current-configuration
```

# 2. 交换机和跨交换机VLAN实验

## 2.1 实验要求

* 配置PC机IP地址，用网线将PC机连接到相应的端口，用ping命令测试，同一vlan中的端口连接的机器可以连通，则表示实验成功；
* 不同vlan中端口连接的机器，不能ping通。
* 配置PC机IP地址，用平行双绞线将PC机分别连接到相应端口，用ping命令测试，同一vlan连接的机器可以连通，不同VLAN中的PC机不能连通，则表示实验成功。

## 2.2 实验过程

首先来看前半部分的实验。意思就是让一个交换机划分出两个VLAN，处在这两个VLAN下的计算机是不能相互通信的。因此我们画出拓扑图：

![[Excalidraw/Drawing 2022-12-12 16.16.02.excalidraw|500]]

这样我们就能看到，虽然在同一个交换机下，也处于同一网段，但是由于VLAN区域不同，所以pc1能ping通pc2，但是ping不通pc3。接下来是跨交换机的配置，实际上就是首先进行一些设置，把两个交换机变成一个交换机，然后在这个大交换机上配置VLAN，进行同样的操作

![[Excalidraw/Drawing 2022-12-12 16.21.56.excalidraw|700]]

和刚才的实验没有什么不同，唯一的区别是VLAN2被建立在了两个交换机上。因此pc1还是能ping通pc2，但是ping不通pc3。

# 3. 路由器配置和子网交换、单臂路由

## 3.1 实验要求

1. 将小组内的2-3台PC机划分成2个不同的网段，用合适的网络设备组建成一个广域网，使处在两个不同网段中的PC机能够互相连通
2. 画出网络拓扑图
3. 正确使用网络设备连接网络
4. 用Ping命令测试网络的连通性
5. 在单臂路由环境下完成上述实验

## 3.2 实验过程

本次实验实质上是模拟的一个小型广域网。两个不同的网段由于路由器的链接，能够进行通信。下面是网络结构拓扑图：

![[homework/Networking/resources/topology1.png]]

我们以pc1来举例子。它处在20网段，而网关的配置是20.2，正好是路由器的GE_0/0端口。因此pc1发送的数据能够准确到达路由器。对于22网段的pc3也是同理，因此这两个网段经过路由器的链接能够互相ping通。而接下来的单臂路由实验也是如此，只不过单臂路由是为了节省硬件，从而虚拟出来这样的环境。使用到的自然是交换机的VLAN和网络层的802.1q协议：

![[homework/Networking/resources/topology2.png]]

我们配置三个网段，并且让三台pc机处在三个VLAN下。这样本身它们是不能够通信的。但是我们通过直连一台路由器，让这三个VLAN之间建立类似刚才的实验中的关系，就能够实现和上面实验一样的效果。这里的vid实际上就是虚拟的线，**也就是对交换机和路由器之间的这根线的复用**。

# 4. 静态路由、RIP

一个路由器怎么把数据发给其他的路由器？它又是怎么知道该发给谁的？本次实验回答的就是这些问题。

## 4.1 实验要求

1. 画好网络拓扑图，确定实际网段的ip地址等信息
2. 按划分的网段将硬件设备连接好，再接通电源；
3. 配置计算机ip地址、子网掩码和网关；
4. 配置路由器ip地址和路由表；
5. 测试网络连接。
6. 使用RIP而不是静态路由，实现同样的效果

## 4.2 实验过程

本次实验其实相当于是在第三次实验的基础上做的，只不过需要额外配置路由表。下面是本次实验的拓扑图(包括静态路由和RIP)：

![[homework/Networking/resources/Pasted image 20221212164406.png]]

交换机不用配置，只需要配置路由器的网关和路由表即可。下面来分别解释一下静态路由和RIP的配置。

以router1为例，它的静态路由需要配置下面这两个关键信息：

1. to: 我要把数据包发送给谁(end node)
2. next hop: 为了发送这个数据包，我应该把这个数据传递给谁才可以

配置好后，如果有数据从pc1到达了router1，router1一查自己的路由表，发现这个包要发送给pc2，那它马上就知道，我应该把这个包传给router2的GE_0/0端口。

---

而RIP的配置相对更加简单，只需要为每个路由器添加所有自己相连的网段即可。因此router1添加了20和30这两个网段；而router2添加了20和40这两个网段。都添加好后，RIP协议通过学习，就能自动构建出一条将30和40这两个网段相连的路径。

# 5&6. Windows下四种服务器的配置

## 5.1 DNS服务器

我们ping百度的时候，只需要`ping www.baidu.com`而不是它的ip地址，靠的就是DNS域名解析服务。通过DNS配置，我们就能够让名字和地址之间建立一一映射关系，从而更方便地定位计算机。

下面是DNS服务器配置的过程。首先我们要给服务器配好自己的静态ip地址。因为服务器的ip不适合经常变动，所以静态ip是比较好的选择；并且，我们要将服务器的DNS服务器地址设置成自己的ip，因为自己本身就是个DNS服务器嘛！

![[homework/Networking/resources/Pasted image 20221212165410.png]]

接下来，按照要求将DNS服务器安装好就可以了。再之后，我们要建立一个查找区域，分别进行正向查找和反向查找。我们的域名就是在这个过程中建立的。比如我可以给我的服务器起一个域名：`spreadzhao.xidian.com`，这样访问这个地址，就等于在访问`192.168.5.5`了。

之后，我们开始配置客户机，ip地址和服务器处于同一个网段，并且将它的DNS设置成服务器的ip。这样我们在客户机中ping服务器就不需要`ping 192.168.5.5`了，只需要`ping spreadzhao.xidian.com`即可。

## 5.2 DHCP服务器的配置

DHCP是为了用户考虑的。有些用户压根不会配置ip，所以它的ip地址是这样的：

![[homework/Networking/resources/Pasted image 20221212165833.png]]

我们要做的，就是让服务器能够随时返回给客户一个可用的ip地址，这样用户自己就无需配置了。

按照流程安装好DHCP服务器后，只需要设置分配给用户的地址空间范围、服务器租约期限、默认网关等等，就可以正常使用了。另外我们还可以建立保留ip，让某些用户每次都能申请到这些ip。

配置好之后，用户只需要全部自动获取，也能够实现上述功能了。

## 5.3 WEB服务器配置

这种服务器就是我们最长见到的，打开浏览器处处都是。它们就是存我们看到的网页源代码的地方。本次我们就要配置这样一个服务器。

安装好web服务器后，我们可以新建一个站点，然后选择网站的ip和端口等等。另外我们还可以指定网站存放的根目录、默认主页的名称、用户对网站的访问权限等等。比如我新建一个`haha.html`放在`spreadwebsite/`目录下，并设置好对应的信息，配合之前的DNS服务器，用户只需要打开浏览器输入：

```
http://spreadzhao.xidian.com
```

就能够打开这个`haha.html`，并经过浏览器解析变成我们常见的网站了。

## 5.4 FTP服务器配置

和web服务器类似，ftp协议也是用户和服务之间的沟通。只不过这次访问的是文件。配置流程和web服务器几乎一模一样，唯一要注意的就是**端口的选择**，如果选择了已经被占用的端口，可能会出现莫名其妙的错误。

在配置好服务器之后，用户只需要打开shell, file explorer, browser等等这些发送访问请求并解析结果的程序，输入这个地址：

```
ftp://spreadzhao.xidian.com
```

就能够访问到目标目录中的文件了。并且也能按照服务器分配的权限去访问或者修改文件。