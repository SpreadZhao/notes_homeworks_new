---
title:
  - 对于自己想的优化点，要考虑到方方面面
  - 埋点框架的建设
  - 架构
date: 2024-08-23
tags:
  - diary/work/thoughts
mtrace:
  - 2024-08-23
---

# 对于自己想的优化点，要考虑到方方面面

这个优化点真的能被用到吗？比如我做过的Loading Auto Fill，当弱网的时候，帮用户自动往上滑。但是**从实验数据看**，这个功能的渗透本身就很低，也就4%左右。虽然能给这部分人带来优化，但是实际用到这部分功能的人就是很少。就像之前的提醒用户主动清理缓存一样。

# 埋点框架的建设

从0开始的话，需要考虑公共字段都有什么，对应的是埋点的基础能力。我们现在所有的埋点都可以看渗透率，看UV，PV，还可以按照某个字段求和，分组等等。这些都不是我们自己做的能力，代表埋点基础库就已经具备了这些能力了。那么从客户端视角，关注的就是到底应该上报哪些信息。

# 架构

与一个组件生命周期相关的逻辑，应该尽可能收敛。因为考虑到后期可能进行异步，如果这部分逻辑和其它的常见逻辑（比如静态的状态的获取等）堆在一起，业务方要获取的时候可不会管你是不是还是当前的实例。它只要能调用到，就会直接拿。以播放器为例，很可能业务方在调用某个播放器状态获取的接口时，拿到的就已经是上一个视频的状态的了。但是业务方视角认为这就是当前视频的。这种情况产生的原因，就是我们在播放器内部做了一些异步的优化，但是没有将生命周期相关的接口给调好。

反过来，如果我们要保证我们的状态接口是正确的，那反而也会一定程度上阻止我们进一步对播放器进行优化。二者之间的权衡要把控好。